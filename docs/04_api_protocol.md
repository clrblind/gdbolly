# Развертывание и Настройка

## 1. Системные требования
*   **Docker Engine** (версия 20.10+)
*   **Docker Compose** (v2+)
*   **ОС**: Linux (рекомендуется), Windows (WSL2), macOS.

## 2. Структура контейнеров
Проект состоит из двух сервисов, описанных в `docker-compose.yml`:

### 2.1. Сервис `backend`
*   **Образ**: `python:3.14-slim` (кастомная сборка в `backend/Dockerfile.txt`).
*   **Критические настройки**:
    *   `cap_add: [SYS_PTRACE]`: **Обязательно**. Разрешает использование `ptrace` для отладки. Без этого GDB запустится, но не сможет аттачиться к процессам (будут ошибки Permission denied).
    *   `security_opt: [seccomp:unconfined]`: Отключает профили seccomp, блокирующие некоторые системные вызовы.
*   **Volumes (Проброс данных)**:
    *   `./targets:/targets`: Папка с исследуемыми бинарниками.
    *   `./database:/app/database`: Папка для SQLite баз данных (сессии и настройки). **Важно**: При очистке контейнеров этот volume сохраняет данные.

### 2.2. Сервис `frontend`
*   **Образ**: `node:latest` (на базе Alpine).
*   **Режим**: Vite Development Server.
*   **Порт**: Внешний 3333 -> Внутренний 3000.
*   **Environment**: `CHOKIDAR_USEPOLLING=true` (Для корректной работы hot-reload на Windows/Mac файловых системах).

## 3. Запуск и Эксплуатация

### 3.1. Первый запуск
Используйте скрипт `run.sh.txt` для корректного запуска и остановки:

```bash
chmod +x run.sh.txt
./run.sh.txt
```

Этот скрипт перехватывает `Ctrl+C` и выполняет `docker compose down -v`, удаляя временные контейнеры, но сохраняя данные в локальных папках.

### 3.2. Добавление бинарников
1.  Поместите исполняемый файл (ELF) или исходный код (`.c`) в папку `targets/` в корне проекта.
2.  В интерфейсе нажмите "Reload Binary".
3.  Если загружен `.c` файл, бэкенд автоматически скомпилирует его с флагами отладки (`-g`).

### 3.3. Troubleshooting (Решение проблем)

*   **GDB выдает "Read memory timeout"**:
    *   Проверьте нагрузку на систему.
    *   Убедитесь, что версия кода бэкенда соответствует v0.0.6+ (где внедрены токены).
*   **Не сохраняются настройки**:
    *   Проверьте права на запись в папку `database/`.
*   **Интерфейс не обновляется при изменении кода**:
    *   Убедитесь, что переменная `CHOKIDAR_USEPOLLING=true` установлена в `docker-compose.yml`.
*   **Ошибка "Permission denied" при запуске Run**:
    *   Вы, вероятно, запустили контейнеры без привилегий. Проверьте раздел `cap_add` и `security_opt` в `docker-compose.yml`.

## 4. Обновление версий
При изменении зависимостей (`package.json` или `requirements.txt`) необходимо пересобирать образы:
```bash
docker compose up --build
```